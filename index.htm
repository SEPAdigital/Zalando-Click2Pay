<html lang="en">
  <head>
    <title>Zalando Click2Pay | BANKpay+</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="/Zalando-Click2Pay/assets/css/style.css?v=0b7bb1cea9d9eaef577b81ac0b3e9c96879178f7">
  </head>
  <body style="margin: 11px">
    <h1>Zalando Click2Pay</h1>
    <p>Pay your Zalando invoice with a click &amp; SEPA QR code scan.</p>
    <h2>Add bookmarklet to favorites bar</h2>

    <a href="javascript:(function()%7B(function%20(doc)%20%7B%0A%20%20const%20merchantUuid%20%3D%20%226eef7164-caee-4af9-a710-a4930086218c%22%0A%20%20const%20authToken%20%3D%20%22218%7C5Tv660WfTYHUqmvsEREOT9L1F0Wpx5afk3HpHvTK%22%0A%20%20function%20bookmarklet()%20%7B%0A%20%20%20%20%2F%2F%20inject%20code%20only%20on%20%60%2Forder-detail%60%20page%0A%20%20%20%20if%20(%0A%20%20%20%20%20%20location.href.match(%22zalando.%5Ba-z%5D%7B2%2C4%7D%2Fmyaccount%2Forder-detail%22)%20!%3D%20null%0A%20%20%20%20)%20%7B%0A%0A%20%20%20%20%20%20let%20qrPay%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20elZPayInfo%20%3D%20%24('h2%5Bstyle%3D%22font-weight%3Abold%22%5D')%3B%0A%0A%20%20%20%20%20%20let%20bankDetailsDirty%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20bankDetails%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20elAmount%20%3D%0A%20%20%20%20%20%20%20%20%20%20%24('p%5Bdata-testid%3D%22customer_order-detail-view_open-amount-text%22%5D')%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20datePayment%20%3D%0A%20%20%20%20%20%20%20%20%20%20(elAmount%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20elAmount.text().match(%2F%5BA-Za-z%5D%2B%5C.%5C%2C%20%5B0-9%5D%2B%5C.%5B0-9%5D%2B%5C.%5B0-9%5D%2B%2F)%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20elAmount.text().match(%2F%5BA-Za-z%5D%2B%5C.%5C%2C%20%5B0-9%5D%2B%5C.%5B0-9%5D%2B%5C.%5B0-9%5D%2B%2F)%5B0%5D)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%220%22%2C%0A%20%20%20%20%20%20%20%20amount%20%3D%0A%20%20%20%20%20%20%20%20%20%20(elAmount%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20elAmount.text().match(%2F%5B0-9%5D%2B(%5B%2C.%5D%5B0-9%5D%2B)%3F%2F)%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20elAmount.text().match(%2F%5B0-9%5D%2B(%5B%2C.%5D%5B0-9%5D%2B)%3F%2F)%5B0%5D)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%220%22%2C%0A%20%20%20%20%20%20%20%20newAmount%20%3D%20parseFloat(amount.replace(%22%2C%22%2C%20%22.%22))%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20newAmount%20%3D%20parseFloat(%24('%5Bdata-testid%3D%22customer_order-detail-view_open-amount-text%22%5D').text().match(%2F%5B0-9%5D%2B(%5B%2C.%5D%5B0-9%5D%2B)%3F%2F)%5B0%5D.toString().replace('%2C'%2C%20'.'))%20%7C%7C%200%2C%0A%20%20%20%20%20%20%20%20newAmountFormatted%20%3D%20parseFloat(newAmount)%0A%20%20%20%20%20%20%20%20%20%20.toFixed(2)%0A%20%20%20%20%20%20%20%20%20%20.toString()%0A%20%20%20%20%20%20%20%20%20%20.replace(%22.%22%2C%20%22%2C%22)%2C%0A%20%20%20%20%20%20%20%20%24SEPAdigitalCode%20%3D%20%24(%22%23sepa-digital-pay-code%22)%20%7C%7C%20null%2C%0A%20%20%20%20%20%20%20%20%24SEPAdigitalButton%20%3D%20%24(%22%23sepa-digital-pay-button%22)%20%7C%7C%20null%2C%0A%20%20%20%20%20%20%20%20btnClasses%20%3D%20%24(%22button%5Bstyle%3D'margin-top%3A25px%3Bwidth%3A100%25'%5D%22).attr(%0A%20%20%20%20%20%20%20%20%20%20%22class%22%0A%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20function%20zalandoPay()%20%7B%0A%20%20%20%20%20%20%20%20console.log(%22BANKpay%2B%20Pay%20Zalando%20init%22)%3B%0A%0A%20%20%20%20%20%20%20%20bankDetailsDirty%20%3D%20%24(elZPayInfo).next().html().split(%22%3Cbr%3E%22)%20%7C%7C%20null%3B%0A%20%20%20%20%20%20%20%20if%20(bankDetailsDirty)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bankDetailsDirty.forEach(function%20(line)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(line.split(%22%3A%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20detail%20%3D%20line.split(%22%3A%22)%5B1%5D.trim()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bankDetails.push(detail)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20(qrPay%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20recipient%3A%20bankDetails%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20iban%3A%20bankDetails%5B1%5D.replace(%2F%5Cs%2Fg%2C%20%22%22)%2C%0A%20%20%20%20%20%20%20%20%20%20bic%3A%20bankDetails%5B2%5D%2C%0A%20%20%20%20%20%20%20%20%20%20reference%3A%20bankDetails%5B6%5D.trim()%2C%20%2F%2F%20%2B%20'%20via%20BANKpay'%2C%0A%20%20%20%20%20%20%20%20%20%20amount%3A%20newAmount%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20(priceHtml%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20(elAmount%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20elAmount%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.text()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20amount%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%3Cspan%20class%3D%22sp-amount%22%3E'%20%2B%20amount%20%2B%20%22%3C%2Fspan%3E%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%220%22)%2C%0A%20%20%20%20%20%20%20%20%20%20(qrUrl%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%22https%3A%2F%2Fdev.matthiasschaffer.com%2Fbezahlcode%2Fapi.php%3Fiban%3D%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20qrPay.iban%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%26bic%3D%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20qrPay.bic%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%26name%3D%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20qrPay.recipient%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%26usage%3D%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20qrPay.reference%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%20via%20BANKpay%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%26amount%3D%22)%3B%0A%0A%20%20%20%20%20%20%20%20let%20img%20%3D%20document.createElement(%22img%22)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20div%0A%20%20%20%20%20%20%20%20img.setAttribute(%22id%22%2C%20%22sepa-digital-pay-code%22)%3B%0A%20%20%20%20%20%20%20%20img.setAttribute(%22class%22%2C%20%22SEPAinstant-qr-code%22)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20img%0A%20%20%20%20%20%20%20%20img.setAttribute(%22src%22%2C%20qrUrl%20%2B%20qrPay.amount)%3B%0A%20%20%20%20%20%20%20%20img.setAttribute(%0A%20%20%20%20%20%20%20%20%20%20%22style%22%2C%0A%20%20%20%20%20%20%20%20%20%20%22width%3A%20170px%3B%20float%3A%20right%3B%20margin%3A%205px%2045px%2010px%200%3B%22%0A%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20%20%20let%20qrImg%20%3D%20img%2C%0A%20%20%20%20%20%20%20%20%20%20paymentInfoTxt%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20'Rechnungsbetrag%3A%20%E2%82%AC%20%3Cspan%20class%3D%22sp-amount%22%3E'%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20newAmountFormatted%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%3C%2Fspan%3E%20bis%20%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20datePayment%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%20%C3%BCberweisen.%22%3B%0A%0A%20%20%20%20%20%20%20%20elZPayInfo%0A%20%20%20%20%20%20%20%20%20%20.html(%24(%22%3Cspan%3E%22).html(paymentInfoTxt))%0A%20%20%20%20%20%20%20%20%20%20.attr(%22style%22%2C%20%22font-weight%3A%20bold%3Btext-align%3Aleft%3B%20display%3A%20block%3B%22)%3B%0A%20%20%20%20%20%20%20%20elZPayInfo.next().prepend(qrImg)%3B%0A%20%20%20%20%20%20%20%20elZPayInfo%0A%20%20%20%20%20%20%20%20%20%20.next()%0A%20%20%20%20%20%20%20%20%20%20.prepend(%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%3Cspan%20class%3D%22bankpay-payment-checkout%22%20data-merchant-uuid%3D%22'%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20merchantUuid%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%22%20data-checkout-uuid%3D%22%22%3E%3C%2Fspan%3E'%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20%20%20%24('%5Bstyle%3D%22display%3Aflex%3Balign-items%3Aflex-start%22%5D')%0A%20%20%20%20%20%20%20%20%20%20.parent()%0A%20%20%20%20%20%20%20%20%20%20.next()%0A%20%20%20%20%20%20%20%20%20%20.html(%0A%20%20%20%20%20%20%20%20%20%20%20%20%24('%5Bstyle%3D%22display%3Aflex%3Balign-items%3Aflex-start%22%5D')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.next()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.find(%22dl%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.clone()%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%24('%5Bstyle%3D%22display%3Aflex%3Balign-items%3Aflex-start%22%5D').next().remove()%3B%0A%20%20%20%20%20%20%20%20%24SEPAdigitalCode%20%3D%20%24(%22%23sepa-digital-pay-code%22)%3B%0A%0A%20%20%20%20%20%20%20%20%24('%5Bdata-testid%3D%22customer_order-detail-view_open-amount-text%22%5D').html(%0A%20%20%20%20%20%20%20%20%20%20priceHtml%0A%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20%20%20var%20payBar%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20%20%20container%20%3D%20%24(%0A%20%20%20%20%20%20%20%20%20%20%20%20%24('%5Bstyle%3D%22border-radius%3A4px%22%5D').parent().parent().find(%22ol%22)%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20payUntilInfoBar%20%3D%20%24('%5Brole%3D%22status%22')%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20payment%20button%0A%20%20%20%20%20%20%20%20payBar%20%3D%20%24(%22%3Cdiv%3E%22)%0A%20%20%20%20%20%20%20%20%20%20.data(%22bankpay-pay-by-link-button%22%2C%20%22%22)%0A%20%20%20%20%20%20%20%20%20%20.attr(%22role%22%2C%20%22payment%22)%0A%20%20%20%20%20%20%20%20%20%20.css(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20%22sticky%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20top%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22z-index%22%3A%20%229999%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22text-align%22%3A%20%22left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20display%3A%20%22block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20margin%3A%20%220%200%201em%200%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22text-align%22%3A%20%22center%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20container.prepend(%24(payBar.clone()))%3B%0A%0A%20%20%20%20%20%20%20%20payBar%20%3D%20%24('%5Brole%3D%22payment%22%5D')%3B%0A%20%20%20%20%20%20%20%20payUntilInfoBar.fadeOut()%3B%0A%0A%20%20%20%20%20%20%20%20payBar%0A%20%20%20%20%20%20%20%20%20%20.html(%0A%20%20%20%20%20%20%20%20%20%20%20%20'%3Cbutton%20class%3D%22SEPAinstant-link-pay%20bankpay-checkout%20'%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%20%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20btnClasses%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%22%20style%3D%22width%3A%20100%25%3B%22'%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'href%3D%22%23%22%3EJetzt%20mit%20deinem%20Bankkonto%20bezahlen%3A%20%E2%82%AC%20'%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newAmountFormatted%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%3C%2Fbutton%3E%22%0A%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20.fadeOut()%0A%20%20%20%20%20%20%20%20%20%20.fadeIn()%3B%0A%0A%20%20%20%20%20%20%20%20%24(%22.SEPAinstant-link-pay%22)%0A%20%20%20%20%20%20%20%20%20%20.off()%0A%20%20%20%20%20%20%20%20%20%20.on(%22click%22%2C%20function%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pay()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%24(%22main%20div%20ol%20li%20ul%20a%22)%0A%20%20%20%20%20%20%20%20%20%20.attr(%22href%22%2C%20%22%23%22)%0A%20%20%20%20%20%20%20%20%20%20.off()%0A%20%20%20%20%20%20%20%20%20%20.css(%7B%20cursor%3A%20%22context-menu%22%20%7D)%0A%20%20%20%20%20%20%20%20%20%20.click(function%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20%24sel%20%3D%20%24(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20%24markedItems%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cancelTxt%20%3D%20%24sel%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.find(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22div.z-sos-position-details__cancellation-status%20span.z-sos-position-details__status-flag-text%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.first()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.text()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20lineAmount%20%3D%20parseFloat(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24sel%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.text()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.match(%2F%5B0-9%5D%2B(%5B%2C.%5D%5B0-9%5D%2B)%3F%2F)%5B0%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.toString()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace(%22%2C%22%2C%20%22.%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20updatedAmount%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(cancelTxt%20%3D%3D%20%22Storniert%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.log(%22Storniert%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20itemDetailURL%20%3D%20%24sel.parent().attr(%22href%22)%20%2B%20%22%23BANKpay%2B%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24sel%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.parent()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.attr(%22href%22%2C%20%22%23BANKpay%2B%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.data(%22detail-url%22%2C%20itemDetailURL)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24sel.find(%22img%22).css(%7B%20filter%3A%20%22grayscale(1)%22%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24markedItems%20%3D%20%24(this).find(%22.sp-return-this-marked%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24markedItems.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24markedItems%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.attr(%22style%22%2C%20%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.css(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22font-style%22%3A%20%22normal%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22text-decoration%22%3A%20%22none%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cursor%3A%20%22zoom-out%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.removeClass(%22sp-return-this-marked%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24sel.find(%22img%22).css(%7B%20filter%3A%20%22none%22%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24sel.find(%22img%22).css(%22filter%3A%20grayscale(1)%3B%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24sel%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.find(%22dl%20p%3Afirst-child%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.css(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22font-style%22%3A%20%22italic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22text-decoration%22%3A%20%22red%20wavy%20line-through%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cursor%3A%20%22zoom-in%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.addClass(%22sp-return-this-marked%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24sel%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.find(%22dl%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.parent(%22div%3Anth-child(1)%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.find(%22div%20span%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.css(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22font-style%22%3A%20%22italic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22text-decoration%22%3A%20%22red%20wavy%20line-through%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cursor%3A%20%22zoom-in%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.addClass(%22sp-return-this-marked%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24markedItems.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20updatedAmount%20%3D%20newAmount%20%2B%20lineAmount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20updatedAmount%20%3D%20newAmount%20-%20lineAmount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20newAmount%20%3D%20updatedAmount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20newAmountFormatted%20%3D%20parseFloat(updatedAmount)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.toFixed(2)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.toString()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace(%22.%22%2C%20%22%2C%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%22newAmount%3A%20%22%2C%20newAmountFormatted)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(%22.sp-amount%22).text(newAmountFormatted)%3B%20%2F%2F%20.fadeOut().fadeIn()%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24('%5Brole%3D%22payment%22%5D').css(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20%22sticky%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22z-index%22%3A%20%229999%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22text-align%22%3A%20%22left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20display%3A%20%22block%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20margin%3A%20%220%200%201em%200%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(%22.SEPAinstant-link-pay%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.html(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Jetzt%20mit%20deinem%20Bankkonto%20bezahlen%3A%20%E2%82%AC%20%22%20%2B%20newAmountFormatted%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.fadeOut()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.fadeIn()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24SEPAdigitalCode%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.attr(%22src%22%2C%20qrUrl%20%2B%20newAmountFormatted)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.trigger(%22create%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(%22.SEPAinstant-link-pay%22).off()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(%22.SEPAinstant-link-pay%22).on(%22click%22%2C%20function%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20pay()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20BANKpay%2B%0A%20%20%20%20%20%20let%20txStatus%2C%0A%20%20%20%20%20%20%20%20tx%2C%0A%20%20%20%20%20%20%20%20checkoutId%2C%0A%20%20%20%20%20%20%20%20baseUrl%20%3D%20%22https%3A%2F%2FBANKpay.plus%22%2C%0A%20%20%20%20%20%20%20%20BANKpay%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20api%3A%20baseUrl%20%2B%20%22%2Fapi%22%2C%0A%20%20%20%20%20%20%20%20%20%20checkout%3A%20baseUrl%20%2B%20%22%2Fcheckout%22%2C%0A%20%20%20%20%20%20%20%20%20%20bank_sca%3A%20baseUrl%20%2B%20%22%2Fbank-sca%22%2C%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20function%20pay(__props%20%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20txStatus%20%3D%20%22new%22%3B%0A%0A%20%20%20%20%20%20%20%20%24(%22.bankpay-iban%22).each(function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%24(this).html(%24(this).html().replace(%2F%5B%5Ea-zA-Z0-9%5D%2Fg%2C%20'').toUpperCase())%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20txStatus%20%3D%20%22processing%22%3B%0A%20%20%20%20%20%20%20%20checkoutId%20%3D%20%24(%22.bankpay-payment-checkout%22).data(%22checkout-uuid%22)%3B%0A%0A%20%20%20%20%20%20%20%20%24(%22.bankpay-checkout-status-url%22).text(%0A%20%20%20%20%20%20%20%20%20%20%22%E2%86%AF%20BANKpay%2B%20Link%20wird%20in%20neuem%20Fenster%20geladen%20%E2%80%A6%22%0A%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(checkoutId%20!%3D%20%22%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20a%20%3D%20document.createElement(%22a%22)%3B%0A%20%20%20%20%20%20%20%20%20%20a.target%20%3D%20%22_blank%22%3B%0A%20%20%20%20%20%20%20%20%20%20a.href%20%3D%20BANKpay.checkout%20%2B%20%22%2F%22%20%2B%20checkoutId%3B%0A%20%20%20%20%20%20%20%20%20%20a.click()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20xhr%20%3D%20new%20XMLHttpRequest()%3B%0A%20%20%20%20%20%20%20%20xhr.open(%22POST%22%2C%20BANKpay.api%20%2B%20%22%2Fcheckout%22%2C%20true)%3B%0A%20%20%20%20%20%20%20%20xhr.setRequestHeader(%0A%20%20%20%20%20%20%20%20%20%20%22Authorization%22%2C%0A%20%20%20%20%20%20%20%20%20%20%22Bearer%20%22%20%2B%20authToken%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20xhr.setRequestHeader(%22Accept%22%2C%20%22application%2Fjson%22)%3B%0A%0A%20%20%20%20%20%20%20%20xhr.onload%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20tx%20%3D%20JSON.parse(xhr.responseText)%3B%0A%20%20%20%20%20%20%20%20%20%20url%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20txStatus%20%3D%20%22processing%22%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(tx.error%20%7C%7C%20tx.message)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%22API%20Error%20%3A%20%2F%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%24(%22.bankpay-checkout-status-url%22).text(%0A%20%20%20%20%20%20%20%20%20%20%20%20BANKpay.checkout%20%2B%20%22%2F%22%20%2B%20tx.uuid%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20open%20BANKpay%2B%0A%20%20%20%20%20%20%20%20%20%20const%20width_of_popup_window%20%3D%20501%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20height_of_popup_window%20%3D%20911%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20left%20%3D%20(screen.width%20-%20width_of_popup_window)%20%2F%202%20-%20250%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20top%20%3D%20(screen.height%20-%20height_of_popup_window)%20%2F%202%20-%2050%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20payWindow%20%3D%20window.open(%0A%20%20%20%20%20%20%20%20%20%20%20%20BANKpay.checkout%20%2B%20%22%2F%22%20%2B%20tx.uuid%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22bankpay%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22left%3D%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%2Ctop%3D%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%2Cheight%3D%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20height_of_popup_window%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%2Cwidth%3D%22%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20width_of_popup_window%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20!payWindow%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20payWindow.closed%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20typeof%20payWindow.closed%20%3D%3D%20%22undefined%22%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20popupBlocked%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(%22.bankpay-plus%22).html(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Hinweise%3A%20bitte%20Popup%20Fenster%20f%C3%BCr%20BANKpay%2B%20erlauben.%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20window.location.href%20%3D%20BANKpay.checkout%20%2B%20%22%2F%22%20%2B%20tx.uuid%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%24(payWindow).on(%22close%22%2C%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20console.log(%22payWindow%20closed%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!bankInitError)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24(%22.bankpay-plus%22).html(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Bezahlvorgang%20wurde%20abgebrochen.%3Cbr%20%2F%3EBank%20ausw%C3%A4hlen%20um%20Zahlung%20zu%20starten.%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(window.focus)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20payWindow.focus()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(!payWindow.closed)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20payWindow.focus()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20var%20reference%20%3D%20qrPay.reference%3B%0A%0A%20%20%20%20%20%20%20%20var%20data%20%3D%20new%20FormData()%2C%0A%20%20%20%20%20%20%20%20%20%20clientId%20%3D%20%24(%22.bankpay-payment-checkout%22).data(%22merchant-uuid%22)%2C%0A%20%20%20%20%20%20%20%20%20%20txId%20%3D%20%22zalando.de-%22%20%2B%20btoa(reference)%3B%0A%0A%20%20%20%20%20%20%20%20data.append(%22reference%22%2C%20reference)%3B%0A%20%20%20%20%20%20%20%20data.append(%22iban_to%22%2C%20qrPay.iban)%3B%0A%20%20%20%20%20%20%20%20data.append(%22amount%22%2C%20newAmount)%3B%0A%20%20%20%20%20%20%20%20data.append(%22correlationId%22%2C%20txId)%3B%0A%20%20%20%20%20%20%20%20data.append(%22clientId%22%2C%20clientId)%3B%0A%20%20%20%20%20%20%20%20data.append(%22checkoutId%22%2C%20checkoutId)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20data.append(%22returnUrl%22%2C%20BANKpay.checkout%20%2B%20%22%2F%22%20%2B%20tx.uuid)%3B%0A%0A%20%20%20%20%20%20%20%20xhr.send(data)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20BANKpay%2B%20setup%0A%20%20%20%20%20%20if%20(%24(%22%23sepa-digital-pay-code%22).length%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20zalandoPay()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20console.log(%22BANKpay%2B%20Zalando%20already%20loaded.%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20end%3A%20url%20check%0A%20%20%7D%0A%0A%20%20if%20(typeof%20jQuery%20%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20var%20script_jQuery%20%3D%20document.createElement(%22script%22)%3B%0A%20%20%20%20script_jQuery.src%20%3D%20%22https%3A%2F%2Fcode.jquery.com%2Fjquery-latest.min.js%22%3B%0A%20%20%20%20script_jQuery.onload%20%3D%20bookmarklet%3B%0A%20%20%20%20doc.body.appendChild(script_jQuery)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20bookmarklet()%3B%0A%20%20%7D%0A%7D)(document)%3B%7D)()">Zalando Click2Pay</a>

    <h2>Usage</h2>
    <ul>
      <li>Drag the bookmarklet, the link shown above, to your favorites bar.</li>
      <li>Log into your Zalando account and select an order you want to pay.</li>
      <li>Click the bookmarklet and then Scan&amp;Pay the SEPA QR code with your banking app.</li>
      <li>Done.</li>
      <li>Repeat with every new invoice you'd like to pay with a Click&amp;Scan.</li>
    </ul>
  </body>
</html>
